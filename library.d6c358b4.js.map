{"mappings":"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","sources":["src/library.js","src/js/library-page-only/filter.js","src/js/library-page-only/modal.js"],"sourcesContent":["import './js/refs';\nimport './js/library-page-only/filter';\nimport './js/library-page-only/modal';\n","import Notiflix from 'notiflix';\n\nconst watchedButRef = document.querySelector('.watchedJS');\nconst queuedButRef = document.querySelector('.queueJS');\n\nconst cardsRenderDivRef = document.querySelector('.main-section__allcards');\nimport { renderSearchResult } from '../render-markup';\n\nconst DATA_KEY1 = 'watched';\nconst DATA_KEY2 = 'queue';\n\nfunction renderWatched(event) {\n  event.preventDefault();\n\n  cardsRenderDivRef.innerHTML = '';\n  event.target.classList.add('active');\n  queuedButRef.classList.remove('active');\n\n  if (!localStorage.getItem(DATA_KEY1)) {\n    Notiflix.Notify.warning('No movies added!');\n    return;\n  }\n  renderData(DATA_KEY1);\n}\n\nfunction renderQueue(event) {\n  event.preventDefault();\n  cardsRenderDivRef.innerHTML = '';\n  event.target.classList.add('active');\n  watchedButRef.classList.remove('active');\n\n  if (!localStorage.getItem(DATA_KEY2)) {\n    Notiflix.Notify.warning('No movies added!');\n    return;\n  }\n\n  renderData(DATA_KEY2);\n}\n\nfunction renderData(DATA_KEY) {\n  let dataToRender = JSON.parse(localStorage.getItem(DATA_KEY));\n  if (!dataToRender) {\n    Notiflix.Notify.warning('No movies added!');\n    return;\n  }\n  const markup = renderSearchResult(dataToRender);\n  cardsRenderDivRef.innerHTML = markup.join('');\n\n  const cards = document.querySelectorAll('.main-section__card');\n  cards.forEach(e => {\n    if (e.dataset.rating !== '0') {\n      e.lastElementChild.insertAdjacentHTML(\n        'beforeend',\n        `<span class=\"rating-span\">${\n          Math.round(e.dataset.rating * 10) / 10\n        }<span>`\n      );\n    }\n  });\n}\n\nfunction renderDataDefault() {\n  renderData(DATA_KEY1);\n  watchedButRef.classList.remove('inactive');\n  watchedButRef.classList.add('active');\n}\n\nrenderDataDefault();\n\nwatchedButRef.addEventListener('click', renderWatched);\nqueuedButRef.addEventListener('click', renderQueue);\n","import { watchTrailer } from '../trailer';\nimport { refs } from '../refs';\n\nconst {\n  allCardsSection,\n  modal,\n  overflow,\n  closeBtn,\n  innerModal,\n  watchedBtn,\n  queueBtn,\n} = refs;\n\nconst queueJSON = localStorage.getItem('queue');\nconst watchedJSON = localStorage.getItem('watched');\nconst queue = JSON.parse(queueJSON) || [];\nconst watched = JSON.parse(watchedJSON) || [];\n\nlet allMoviesList = updateMoviesList('watched');\n\nwatchedBtn.addEventListener('click', () => {\n  allMoviesList = updateMoviesList('watched');\n});\nqueueBtn.addEventListener('click', () => {\n  allMoviesList = updateMoviesList('queue');\n});\nallCardsSection.addEventListener('click', showModal);\n\nfunction updateMoviesList(item) {\n  const allMoviesListFromStorage = localStorage.getItem(item);\n  return JSON.parse(allMoviesListFromStorage);\n}\n\nfunction addToWatched(e) {\n  e.target.classList.add('active');\n  const clickedFilm = allMoviesList[e.target.dataset.id];\n  if (watched.find(film => film.id === clickedFilm.id)) {\n    alert('Film already in the watched list!');\n  } else {\n    watched.push(clickedFilm);\n    localStorage.setItem('watched', JSON.stringify(watched));\n  }\n}\n\nfunction addToQueue(e) {\n  e.target.classList.add('active');\n  const clickedFilm = allMoviesList[e.target.dataset.id];\n  if (queue.find(film => film.id === clickedFilm.id)) {\n    alert('Film already in the queue!');\n  } else {\n    queue.push(clickedFilm);\n    localStorage.setItem('queue', JSON.stringify(queue));\n  }\n}\n\nexport function showModal(e) {\n  if (e.currentTarget !== e.target) {\n    modal.classList.remove('visually-hidden');\n    overflow.classList.remove('visually-hidden');\n    allCardsSection.removeEventListener('click', showModal);\n    document.addEventListener('keydown', closeModalOnEsc);\n    closeBtn.addEventListener('click', closeModal);\n    overflow.addEventListener('click', closeModalOverflow);\n\n    const id = e.target.parentElement.dataset.id\n      ? e.target.parentElement.dataset.id\n      : e.target.parentElement.parentElement.dataset.id;\n\n    createModal(id);\n  }\n}\n\nfunction closeModalOverflow(e) {\n  if (e.currentTarget === e.target) closeModal();\n}\n\nfunction closeModalOnEsc(e) {\n  if (e.code === 'Escape') closeModal();\n}\n\nfunction closeModal() {\n  modal.classList.add('visually-hidden');\n  overflow.classList.add('visually-hidden');\n  allCardsSection.addEventListener('click', showModal);\n  document.removeEventListener('keydown', closeModal);\n  closeBtn.removeEventListener('click', closeModal);\n  overflow.removeEventListener('click', closeModalOverflow);\n}\n\nfunction createModal(id) {\n  const {\n    poster_path,\n    original_title,\n    title,\n    genre_ids,\n    vote_average,\n    vote_count,\n    popularity,\n    overview,\n    id: film_id,\n  } = allMoviesList[id];\n  const genres = JSON.parse(localStorage.getItem('allGenres'));\n  const finalGenres = [];\n  genre_ids.forEach(idx => {\n    finalGenres.push(genres.find(genre => genre.id === idx).name);\n  });\n\n  const markup = `<div class=\"modal__img\">\n      <img src=\"https://image.tmdb.org/t/p/w500${poster_path}\" alt=\"${title}\" />\n    </div>\n    <div class=\"modal__about\">\n      <div class=\"modal__headline\">${title}</div>\n      <ul class=\"modal__list\">\n        <li class=\"modal__item\">\n          <div class=\"modal__item-first\">Vote / Votes</div>\n          <div class=\"modal__item-votes\">\n            <span class=\"modal__item-bg modal__item--accent\">${vote_average.toFixed(\n              1\n            )}</span> /\n            <span class=\"modal__item-bg modal__item--grey\">${vote_count}</span>\n          </div>\n        </li>\n        <li class=\"modal__item\">\n          <div class=\"modal__item-first\">Popularity</div>\n          <div>${popularity}</div>\n        </li>\n        <li class=\"modal__item\">\n          <div class=\"modal__item-first\">Original Title</div>\n          <div class=\"modal__item-title\">${original_title}</div>\n        </li>\n        <li class=\"modal__item\">\n          <div class=\"modal__item-first\">Genre</div>\n          <div>${finalGenres.join(', ')}</div>\n        </li>\n      </ul> \n      <div class=\"modal__about-info\">\n        <p class=\"modal__about-headline\">About</p>\n        <p class=\"modal__about-text\">\n          ${overview}\n        </p>\n      </div>\n          <div class=\"modal__buttons\">\n      <button class=\"modal__btn-watched interactive-button\" data-id=${id}>\n        add to Watched\n      </button>\n      <button class=\"modal__btn-queue interactive-button\" data-id=${id}>add to queue</button>\n      <button class='modal_btn-watched interactive-button modal_btn-watch-trailer' data-id=${film_id}>watch trailer</button>\n    </div>\n    </div>\n\n    `;\n  innerModal.innerHTML = markup;\n\n  const addToWatchedBtn = document.querySelector('.modal__btn-watched');\n  const addToQueueBtn = document.querySelector('.modal__btn-queue');\n  const watchTrailerBtn = document.querySelector('.modal_btn-watch-trailer');\n\n  addToQueueBtn.addEventListener('click', addToQueue);\n  addToWatchedBtn.addEventListener('click', addToWatched);\n  watchTrailerBtn.addEventListener('click', watchTrailer);\n}\n"],"names":["parcelRequire","$iU1Pc","$ac6ae25c154de267$var$watchedButRef","document","querySelector","$ac6ae25c154de267$var$queuedButRef","$ac6ae25c154de267$var$cardsRenderDivRef","$ac6ae25c154de267$var$DATA_KEY1","$ac6ae25c154de267$var$DATA_KEY2","$ac6ae25c154de267$var$renderData","DATA_KEY","dataToRender","JSON","parse","localStorage","getItem","markup","$7VSht","renderSearchResult","innerHTML","join","querySelectorAll","forEach","e","dataset","rating","lastElementChild","insertAdjacentHTML","concat","Math","round","$parcel$interopDefault","Notify","warning","classList","remove","add","addEventListener","event","preventDefault","target","$cDXQO","$8ce30ff5fad2cacd$var$allCardsSection","$4Nugj","refs","allCardsSection","$8ce30ff5fad2cacd$var$modal","modal","$8ce30ff5fad2cacd$var$overflow","overflow","$8ce30ff5fad2cacd$var$closeBtn","closeBtn","$8ce30ff5fad2cacd$var$innerModal","innerModal","$8ce30ff5fad2cacd$var$watchedBtn","watchedBtn","$8ce30ff5fad2cacd$var$queueBtn","queueBtn","$8ce30ff5fad2cacd$var$queueJSON","$8ce30ff5fad2cacd$var$watchedJSON","$8ce30ff5fad2cacd$var$queue","$8ce30ff5fad2cacd$var$watched","$8ce30ff5fad2cacd$var$allMoviesList","$8ce30ff5fad2cacd$var$updateMoviesList","item","allMoviesListFromStorage","$8ce30ff5fad2cacd$var$addToWatched","clickedFilm","id","find","film","alert","push","setItem","stringify","$8ce30ff5fad2cacd$var$addToQueue","$8ce30ff5fad2cacd$export$d7e8d4d4450c819c","currentTarget","removeEventListener","$8ce30ff5fad2cacd$var$closeModalOnEsc","$8ce30ff5fad2cacd$var$closeModal","$8ce30ff5fad2cacd$var$closeModalOverflow","_id","poster_path","original_title","title","genre_ids","vote_average","vote_count","popularity","overview","film_id","genres","finalGenres","idx","genre","name","toFixed","addToWatchedBtn","addToQueueBtn","watchTrailerBtn","watchTrailer","$8ce30ff5fad2cacd$var$createModal","parentElement","code"],"version":3,"file":"library.d6c358b4.js.map"}