{"mappings":"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","sources":["src/library.js","src/js/library-page-only/filter.js","src/js/library-page-only/modal.js"],"sourcesContent":["import './js/refs';\nimport './js/library-page-only/filter';\nimport './js/library-page-only/modal';\nimport './js/cursor';\nimport './js/transitionFix';\nimport './js/footer-modal';\n","import Notiflix from 'notiflix';\n\nconst watchedButRef = document.querySelector('.watchedJS');\nconst queuedButRef = document.querySelector('.queueJS');\n\nconst cardsRenderDivRef = document.querySelector('.main-section__allcards');\nimport { renderSearchResult } from '../render-markup';\n\nconst DATA_KEY1 = 'watched';\nconst DATA_KEY2 = 'queue';\n\nexport function renderWatched() {\n  cardsRenderDivRef.innerHTML = `Its empty here, add movies you've already watched.`;\n  watchedButRef.classList.add('active');\n  queuedButRef.classList.remove('active');\n\n  if (!localStorage.getItem(DATA_KEY1)) {\n    Notiflix.Notify.warning('No movies added!');\n    return;\n  }\n  renderData(DATA_KEY1);\n}\n\nexport function renderQueue() {\n  cardsRenderDivRef.innerHTML = `It's empty here, add the movies you want to watch.`;\n  queuedButRef.classList.add('active');\n  watchedButRef.classList.remove('active');\n\n  if (!localStorage.getItem(DATA_KEY2)) {\n    Notiflix.Notify.warning('No movies added!');\n    return;\n  }\n\n  renderData(DATA_KEY2);\n}\n\nfunction renderData(DATA_KEY) {\n  let dataToRender = JSON.parse(localStorage.getItem(DATA_KEY));\n  if (!dataToRender) {\n    Notiflix.Notify.warning('No movies added!');\n    return;\n  }\n  const markup = renderSearchResult(dataToRender);\n  cardsRenderDivRef.innerHTML = markup.join('');\n\n  const cards = document.querySelectorAll('.main-section__card');\n  cards.forEach(e => {\n    if (e.dataset.rating !== '0') {\n      e.lastElementChild.insertAdjacentHTML(\n        'beforeend',\n        `<span class=\"rating-span\">${\n          Math.round(e.dataset.rating * 10) / 10\n        }<span>`\n      );\n    }\n  });\n}\n\nfunction renderDataDefault() {\n  renderData(DATA_KEY1);\n  watchedButRef.classList.remove('inactive');\n  watchedButRef.classList.add('active');\n}\n\nrenderDataDefault();\n\nwatchedButRef.addEventListener('click', renderWatched);\nqueuedButRef.addEventListener('click', renderQueue);\n","import { watchTrailer } from '../trailer';\nimport { refs } from '../refs';\nimport { renderQueue, renderWatched } from './filter';\nimport Notiflix from 'notiflix';\nimport { renderModal } from '../render-modal';\n\nconst {\n  allCardsSection,\n  modal,\n  overflow,\n  closeBtn,\n  innerModal,\n  watchedBtn,\n  queueBtn,\n  cursor,\n  body,\n} = refs;\n\nconst queueJSON = localStorage.getItem('queue');\nconst watchedJSON = localStorage.getItem('watched');\n\nlet queue = JSON.parse(queueJSON) || [];\nlet watched = JSON.parse(watchedJSON) || [];\nlet allMoviesList = updateMoviesList('watched');\nlet shouldRerender = false;\n\nwatchedBtn.addEventListener('click', () => {\n  allMoviesList = updateMoviesList('watched');\n});\nqueueBtn.addEventListener('click', () => {\n  allMoviesList = updateMoviesList('queue');\n});\nallCardsSection.addEventListener('click', showModal);\n\nfunction updateMoviesList(item) {\n  const allMoviesListFromStorage = localStorage.getItem(item);\n  return JSON.parse(allMoviesListFromStorage);\n}\n\nfunction addToWatched(e) {\n  e.target.innerText = 'remove from watched';\n  const clickedFilm = allMoviesList[e.target.dataset.id];\n  watched.push(clickedFilm);\n  localStorage.setItem('watched', JSON.stringify(watched));\n  e.target.addEventListener('click', removeFromWatched);\n  e.target.removeEventListener('click', addToWatched);\n  shouldRerender = true;\n  Notiflix.Notify.success('Added to watched!');\n}\n\nfunction removeFromWatched(e) {\n  e.target.innerText = 'add to watched';\n  const clickedFilm = allMoviesList[e.target.dataset.id];\n  watched = watched.filter(film => film.id !== clickedFilm.id);\n  localStorage.setItem('watched', JSON.stringify(watched));\n  e.target.removeEventListener('click', removeFromWatched);\n  e.target.addEventListener('click', addToWatched);\n  shouldRerender = true;\n  Notiflix.Notify.success('Removed from watched!');\n}\n\nfunction addToQueue(e) {\n  e.target.innerText = 'remove from queue';\n  const clickedFilm = allMoviesList[e.target.dataset.id];\n  queue.push(clickedFilm);\n  localStorage.setItem('queue', JSON.stringify(queue));\n  e.target.addEventListener('click', removeFromQueue);\n  e.target.removeEventListener('click', addToQueue);\n  shouldRerender = true;\n  Notiflix.Notify.success('Added to queue!');\n}\n\nfunction removeFromQueue(e) {\n  e.target.innerText = 'add to queue';\n  const clickedFilm = allMoviesList[e.target.dataset.id];\n  queue = queue.filter(film => film.id !== clickedFilm.id);\n  localStorage.setItem('queue', JSON.stringify(queue));\n  e.target.removeEventListener('click', removeFromQueue);\n  e.target.addEventListener('click', addToQueue);\n  shouldRerender = true;\n  Notiflix.Notify.success('Removed from queue!');\n}\n\nexport function showModal(e) {\n  if (e.currentTarget !== e.target) {\n    modal.classList.remove('hidden-modal');\n    overflow.classList.remove('hidden-modal');\n    allCardsSection.removeEventListener('click', showModal);\n\n    document.addEventListener('keydown', closeModalOnEsc);\n    closeBtn.addEventListener('click', closeModal);\n    overflow.addEventListener('click', closeModalOverflow);\n\n    const id = e.target.parentElement.dataset.id\n      ? e.target.parentElement.dataset.id\n      : e.target.parentElement.parentElement.dataset.id;\n\n    createModal(id);\n\n    const top = window.scrollY;\n    body.style.position = 'fixed';\n    body.style.top = `-${top}px`;\n  }\n}\n\nfunction closeModalOverflow(e) {\n  if (e.currentTarget === e.target) closeModal();\n}\n\nfunction closeModalOnEsc(e) {\n  if (e.code === 'Escape') closeModal();\n}\n\nfunction closeModal() {\n  modal.classList.add('hidden-modal');\n  overflow.classList.add('hidden-modal');\n\n  allCardsSection.addEventListener('click', showModal);\n\n  document.removeEventListener('keydown', closeModal);\n  closeBtn.removeEventListener('click', closeModal);\n  overflow.removeEventListener('click', closeModalOverflow);\n\n  if (queueBtn.classList.contains('active') && shouldRerender) {\n    renderQueue();\n  } else if (shouldRerender) {\n    renderWatched();\n  }\n\n  shouldRerender = false;\n\n  const top = body.style.top;\n  body.style.position = '';\n  body.style.top = '';\n  window.scrollTo(0, parseInt(top || '0') * -1);\n}\n\nfunction createModal(id) {\n  const rendered = renderModal(allMoviesList, id, watched, queue);\n  innerModal.innerHTML = rendered[0];\n  addListeners(rendered[1], rendered[2]);\n}\n\nfunction addListeners(isInQueue, isInWatched) {\n  const watchedBtn = document.querySelector('.modal__btn-watched');\n  const queueBtn = document.querySelector('.modal__btn-queue');\n  const watchTrailerBtn = document.querySelector('.modal__btn-watch-trailer');\n\n  isInQueue\n    ? queueBtn.addEventListener('click', removeFromQueue)\n    : queueBtn.addEventListener('click', addToQueue);\n\n  isInWatched\n    ? watchedBtn.addEventListener('click', removeFromWatched)\n    : watchedBtn.addEventListener('click', addToWatched);\n\n  watchTrailerBtn.addEventListener('click', watchTrailer);\n\n  [watchTrailerBtn, queueBtn, watchTrailerBtn, closeBtn].forEach(btn => {\n    btn.addEventListener('mouseover', () => {\n      cursor.classList.add('hover');\n    });\n    btn.addEventListener('mouseleave', () => {\n      cursor.classList.remove('hover');\n    });\n  });\n}\n"],"names":["parcelRequire","$iU1Pc","$ac6ae25c154de267$var$watchedButRef","document","querySelector","$ac6ae25c154de267$var$queuedButRef","$ac6ae25c154de267$var$cardsRenderDivRef","$ac6ae25c154de267$var$DATA_KEY1","$ac6ae25c154de267$var$DATA_KEY2","$ac6ae25c154de267$export$e6add4fd103bff25","innerHTML","classList","add","remove","localStorage","getItem","$ac6ae25c154de267$var$renderData","$parcel$interopDefault","Notify","warning","$ac6ae25c154de267$export$bf507024c5966c24","DATA_KEY","dataToRender","JSON","parse","markup","$7VSht","renderSearchResult","join","querySelectorAll","forEach","e","dataset","rating","lastElementChild","insertAdjacentHTML","concat","Math","round","addEventListener","$cDXQO","$8ce30ff5fad2cacd$var$allCardsSection","$4Nugj","refs","allCardsSection","$8ce30ff5fad2cacd$var$modal","modal","$8ce30ff5fad2cacd$var$overflow","overflow","$8ce30ff5fad2cacd$var$closeBtn","closeBtn","$8ce30ff5fad2cacd$var$innerModal","innerModal","$8ce30ff5fad2cacd$var$watchedBtn","watchedBtn","$8ce30ff5fad2cacd$var$queueBtn","queueBtn","$8ce30ff5fad2cacd$var$cursor","cursor","$8ce30ff5fad2cacd$var$body","body","$8ce30ff5fad2cacd$var$queueJSON","$8ce30ff5fad2cacd$var$watchedJSON","$8ce30ff5fad2cacd$var$queue","$8ce30ff5fad2cacd$var$watched","$8ce30ff5fad2cacd$var$allMoviesList","$8ce30ff5fad2cacd$var$updateMoviesList","$8ce30ff5fad2cacd$var$shouldRerender","item","allMoviesListFromStorage","$8ce30ff5fad2cacd$var$addToWatched","target","innerText","clickedFilm","id","push","setItem","stringify","$8ce30ff5fad2cacd$var$removeFromWatched","removeEventListener","success","filter","film","$8ce30ff5fad2cacd$var$addToQueue","$8ce30ff5fad2cacd$var$removeFromQueue","$8ce30ff5fad2cacd$export$d7e8d4d4450c819c","currentTarget","$8ce30ff5fad2cacd$var$closeModalOnEsc","$8ce30ff5fad2cacd$var$closeModal","$8ce30ff5fad2cacd$var$closeModalOverflow","rendered","$lEOFC","renderModal","isInQueue","isInWatched","watchedBtn1","queueBtn1","watchTrailerBtn","watchTrailer","btn","$8ce30ff5fad2cacd$var$createModal","parentElement","top","window","scrollY","style","position","code","contains","scrollTo","parseInt"],"version":3,"file":"library.d8ee3ab9.js.map"}